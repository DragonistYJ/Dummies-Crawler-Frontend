(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2989896c","chunk-17c04ec3","chunk-791cbbb1","chunk-2d0ab68f","chunk-2d0e9757","chunk-2d0a45cf","chunk-2d224862","chunk-2d0e1780"],{"05b6":function(e,t,n){"use strict";function o(e){this.object=e||{}}function i(e){e=e||{};var t=function(){};if(this.selectedCellListener=e.selectedCellListener||t,mxClient.isBrowserSupported()){this.editor=new mxEditor,this.editor.setGraphContainer(e.element),this.graph=this.editor.graph,this.graph.setConnectable(!0),this.graph.setMultigraph(!1),this.graph.setAllowLoops(!0),this.graph.isHtmlLabel=function(e){return!this.isSwimlane(e)},mxConstants.MIN_HOTSPOT_SIZE=16,mxGraphHandler.prototype.guidesEnabled=!0,this.registerJsonCodec(),this.configureStylesheet();var n=this,o=0;mxEvent.addListener(e.element,"paste",(function(e){var t=e.clipboardData.getData("Text"),i=mxUtils.parseXml(t);if(i){var a=i.documentElement,r=new mxCodec(a.ownerDocument),s=r.decode(a);s&&s.length>0?(o++,n.graph.setSelectionCells(n.graph.importCells(s,10*o,10*o,n.graph.getDefaultParent()))):this.execute("paste")}else n.execute("paste")})),this.keyHandler=new mxKeyHandler(this.graph),this.keyHandler.getFunction=function(e){return null!=e?mxEvent.isControlDown(e)||mxClient.IS_MAC&&e.metaKey?this.controlKeys[e.keyCode]:this.normalKeys[e.keyCode]:null},this.bindKeyAction(),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,(function(e,t){n.onSelectedCell(e,t)}))}}n.r(t),n.d(t,"JsonProperty",(function(){return o})),n.d(t,"SpiderEditor",(function(){return i})),o.prototype.setDefaultValue=function(e,t){this.object[e]=this.object[e]||t},o.prototype.reset=function(e){this.object=e},o.prototype.set=function(e,t){this.object[e]=t},o.prototype.get=function(e){return this.object[e]},window.JsonProperty=o,i.prototype.bindKeyAction=function(){var e=this;this.keyHandler.bindKey(46,(function(){e.deleteSelectCells()})),this.keyHandler.bindControlKey(90,(function(){e.execute("undo")})),this.keyHandler.bindControlKey(89,(function(){e.execute("redo")})),this.keyHandler.bindControlKey(88,(function(){e.execute("cut")})),this.keyHandler.bindControlKey(67,(function(){e.executeCopy()})),this.keyHandler.bindControlKey(65,(function(){e.execute("selectAll")}))},i.prototype.configureStylesheet=function(){var e={};e=this.graph.getStylesheet().getDefaultEdgeStyle(),e[mxConstants.STYLE_EDGE]=mxConstants.EDGESTYLE_ORTHOGONAL,e[mxConstants.STYLE_STROKECOLOR]="black",e[mxConstants.STYLE_STROKEWIDTH]="2",e=this.graph.getStylesheet().getDefaultVertexStyle(),e[mxConstants.STYLE_STROKECOLOR]="black",e[mxConstants.STYLE_FONTSIZE]=12,this.graph.alternateEdgeStyle="elbow=vertical"},i.prototype.deleteSelectCells=function(){this.graph.escape();var e=this.graph.getDeletableCells(this.graph.getSelectionCells());if(null!=e&&e.length>0){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n];(!i.isVertex()||i.data&&"start"!=i.data.get("shape"))&&t.push(i)}if(0===t.length)return;var a=this.graph.selectParentAfterDelete?this.graph.model.getParents(t):null;if(this.graph.removeCells(t,!0),null!=a){for(var r=[],s=0;s<a.length;s++)this.graph.model.contains(a[s])&&(this.graph.model.isVertex(a[s])||this.graph.model.isEdge(a[s]))&&r.push(a[s]);this.graph.setSelectionCells(r)}}},i.prototype.addShape=function(e,t,n,i){var a={};"comment"===e?(a[mxConstants.STYLE_FILLCOLOR]="none",a[mxConstants.STYLE_STROKECOLOR]="none"):(a[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_IMAGE,a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP,a[mxConstants.STYLE_IMAGE_WIDTH]=32,a[mxConstants.STYLE_IMAGE_HEIGHT]=32,a[mxConstants.STYLE_IMAGE]=n.src,a[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,a[mxConstants.STYLE_SPACING_TOP]=-26),a[mxConstants.STYLE_FONTCOLOR]="#000000",this.graph.getStylesheet().putCellStyle(e,a);var r=this,s=function(n,i,a,s,l){var c=r.graph.getDefaultParent(),d=r.graph.getModel();d.beginUpdate();try{a=r.graph.insertVertex(c,null,t,s,l,32,32,e),a.data=new o,a.data.set("shape",e)}finally{d.endUpdate()}r.graph.setSelectionCell(a)},l=document.createElement("div");l.style.border="dashed black 1px",l.style.width="32px",l.style.height="32px";var c=mxUtils.makeDraggable(n,this.graph,s,l,0,0,!0,!0);if(c.setGuidesEnabled(!0),i){var d,u=this.graph.getDefaultParent(),h=this.graph.getModel();h.beginUpdate();try{d=this.graph.insertVertex(u,null,t,80,80,32,32,e),d.data=new o,d.data.set("shape",e)}finally{h.endUpdate()}}},i.prototype.registerJsonCodec=function(){var e=new mxObjectCodec(new o);e.encode=function(e,t){var n=e.document.createElement("JsonProperty");return mxUtils.setTextContent(n,JSON.stringify(t.object)),n},e.decode=function(e,t,n){return new o(JSON.parse(mxUtils.getTextContent(t)))},mxCodecRegistry.register(e)},i.prototype.onSelectedCell=function(e,t){this.selectedCellListener(this.getSelectedCell())},i.prototype.getModel=function(){return this.graph.getModel()},i.prototype.executeCopy=function(){this.editor.execute("copy");var e=this.graph.getSelectionCells();if(e&&e.length>0){var t=document.createElement("textarea");t.style="position:absolute;left:-99999999px",document.body.appendChild(t),t.innerHTML=mxUtils.getPrettyXml((new mxCodec).encode(e)),t.readOnly=!1,t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),document.body.removeChild(t)}},i.prototype.execute=function(e){"copy"===e?this.executeCopy():this.editor.execute(e)},i.prototype.getSelectedCell=function(){var e=this.graph.getSelectionCell()||this.graph.getModel().getRoot();return e.data=e.data||new o,e},i.prototype.getXML=function(){return mxUtils.getPrettyXml(new mxCodec(mxUtils.createXmlDocument()).encode(this.graph.getModel()))},i.prototype.selectCell=function(e){this.graph.setSelectionCell(e)},i.prototype.valid=function(){var e=this.editor.graph.getModel().cells;for(var t in e){var n=e[t];if(n&&n.edge&&(null==n.source||null==n.target))return n}return null},i.prototype.setXML=function(e){var t=mxUtils.parseXml(e),n=t.documentElement,o=new mxCodec(n.ownerDocument);o.decode(n,this.getModel()),this.selectedCellListener(this.getSelectedCell())},i.prototype.importFromUrl=function(e){var t=mxUtils.load(e),n=t.getDocumentElement(),o=new mxCodec(n.ownerDocument);o.decode(n,this.getModel())}},"14c9":function(e,t,n){"use strict";n.r(t),n.d(t,"listRequest",(function(){return a})),n.d(t,"startStopRequest",(function(){return r})),n.d(t,"cronRequest",(function(){return s})),n.d(t,"removeRequest",(function(){return l})),n.d(t,"runRequest",(function(){return c})),n.d(t,"logDownloadRequest",(function(){return d})),n.d(t,"otherRequest",(function(){return u})),n.d(t,"xmlRequest",(function(){return h})),n.d(t,"saveRequest",(function(){return p})),n.d(t,"historyRequest",(function(){return A})),n.d(t,"recoverHistoryRequest",(function(){return m}));n("7f7f");var o=n("4020"),i="spider/",a=function(e,t,n){o["default"].send(i+"list",e,t,n)},r=function(e,t,n,a){o["default"].send(i+(e?"start":"stop"),{id:t},n,a)},s=function(e,t,n){o["default"].send(i+"cron",e,t,n)},l=function(e,t,n){o["default"].send(i+"remove",{id:e},t,n)},c=function(e,t,n){o["default"].send(i+"run",{id:e},t,n)},d=function(e,t){window.open(i+"log/download?id="+e+"&taskId="+(t||""))},u=function(e,t,n){o["default"].send(i+"other",{id:e},t,n)},h=function(e,t,n){o["default"].send(i+"xml",{id:e},t,n,{responseType:"text"})},p=function(e,t,n){e.name=e.name||"未定义名称",o["default"].send(i+"save",e,t,n,{responseType:"text"})},A=function(e,t,n){o["default"].send(i+"history",{id:e},t,n)},m=function(e,t,n,a){o["default"].send(i+"history",{id:e,timestamp:t},n,a)}},2260:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"历史版本",footer:null},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("a-table",{attrs:{columns:e.columns,"data-source":e.tableDataTime,bordered:"",size:e.size,pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,o){return[n("a-button",{attrs:{type:"link",size:e.size},on:{click:function(t){return e.recoverHistory(o.timestamp)}}},[e._v("\n        恢复到此版本\n      ")])]}}])})],1)},i=[],a=(n("6d67"),n("14c9")),r=n("e100"),s=n("c1df"),l=n.n(s),c={name:"HistoryVersionModal",props:{id:{type:String},editor:{type:Object}},mixins:[r["default"]],data:function(){return{show:!1,tableData:[],columns:[{title:"修改时间",dataIndex:"date"},{title:"操作",dataIndex:"timestamp",width:120,scopedSlots:{customRender:"operation"}}]}},computed:{tableDataTime:function(){return this.tableData.map((function(e,t){return{key:t,timestamp:e,date:l()(e).format("YYYY-MM-DD HH:mm:ss")}}))}},methods:{historyAction:function(){var e=this;Object(a["historyRequest"])(this.id,(function(t){e.tableData=t.data,e.tableData.length>0?e.show=!0:e.$message.success("暂无历史版本！")}))},recoverHistory:function(e){var t=this;this.$confirm({title:"信息",content:"你确定要恢复到该版本吗？",okText:"确定",cancelText:"取消",onOk:function(){Object(a["recoverHistoryRequest"])(t.id,e,(function(e){t.editor.setXML(e.data),t.show=!1}))},onCancel:function(){}})}}},d=c,u=n("2877"),h=Object(u["a"])(d,o,i,!1,null,null,null);t["default"]=h.exports},"3ff2":function(e,t,n){},4743:function(e,t,n){var o={"./edge":["bac5",9,"chunk-c370ef0a"],"./edge.vue":["bac5",9,"chunk-c370ef0a"],"./forkJoin":["18e4",9,"chunk-2d0ac5cc"],"./forkJoin.vue":["18e4",9,"chunk-2d0ac5cc"],"./loop":["c118",9,"chunk-2d215fcb"],"./loop.vue":["c118",9,"chunk-2d215fcb"],"./output":["bf12",9,"chunk-128cf583"],"./output.vue":["bf12",9,"chunk-128cf583"],"./request":["2da8",9,"chunk-eec38778"],"./request.vue":["2da8",9,"chunk-eec38778"],"./root":["7229",9,"chunk-21d15c5e"],"./root-data":["8b90",3,"chunk-2d0e8cb7"],"./root-data.json":["8b90",3,"chunk-2d0e8cb7"],"./root.vue":["7229",9,"chunk-21d15c5e"],"./start":["0a06",9,"chunk-2d0ae4ed"],"./start.vue":["0a06",9,"chunk-2d0ae4ed"]};function i(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return n.e(t[2]).then((function(){return n.t(i,t[1])}))}i.keys=function(){return Object.keys(o)},i.id="4743",e.exports=i},"7b21":function(e){e.exports=JSON.parse('[{"type":"ant","icon":"rollback","title":"返回列表","click":{"name":"goPage","params":"/spider_list"}},{"type":"divider"},{"type":"ant","icon":"save","title":"保存（Ctrl+S）","exeFun":"","exeFunKey":["ctrl","s"],"click":{"name":"saveAction"}},{"type":"ant","icon":"play-circle","title":"测试（Ctrl+Q）","exeFun":"","exeFunKey":["ctrl","q"]},{"type":"divider"},{"type":"ant","icon":"undo","title":"撤销（Ctrl+Z）","exeFun":"","exeFunKey":["ctrl","z"],"click":{"name":"spiderFlowExecute","params":"undo"}},{"type":"ant","icon":"redo","title":"反撤销（Ctrl+Y）","exeFun":"","exeFunKey":["ctrl","y"],"click":{"name":"spiderFlowExecute","params":"redo"}},{"type":"ant","icon":"history","title":"历史版本","click":{"name":"getHistoryVersion"}},{"type":"divider"},{"type":"ant","icon":"select","title":"全选（Ctrl+A）","exeFun":"","exeFunKey":["ctrl","a"],"click":{"name":"spiderFlowExecute","params":"selectAll"}},{"type":"ant","icon":"scissor","title":"剪切（Ctrl+X）","exeFun":"","exeFunKey":["ctrl","x"],"click":{"name":"spiderFlowExecute","params":"cut"}},{"type":"ant","icon":"copy","title":"复制（Ctrl+C）","exeFun":"","exeFunKey":["ctrl","c"],"click":{"name":"spiderFlowExecute","params":"copy"}},{"type":"ant","icon":"snippets","title":"粘贴（Ctrl+V）","exeFun":"","exeFunKey":["ctrl","v"],"click":{"name":"spiderFlowExecute","params":"paste"}},{"type":"ant","icon":"delete","title":"删除（Delete）","exeFun":"","exeFunKey":["delete"],"click":{"name":"deleteSelectCells"}}]')},"8e2f":function(e,t,n){"use strict";n.r(t),n.d(t,"loadShapes",(function(){return o}));n("7f7f");function o(e,t){for(var n=[{name:"start",title:"开始",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABwUlEQVRYR9WXz1XCQBDGv9GD3sSDkpvYAR2IHWAF0oFsBUIFGyoQK1ArECpQK8BjcsMbnj7fRsN7hPDcCRt87nl25jez828FinNq2d0TWAINAR4XhJkbmStUrImK7+WGZeNAMBOgkd8hMUqN9H11lMl5A/x4/1BUsiCOt4mCN0BkOYDgds0L4jIxMqkahX8EEHMGoFX0NOmLtxOVcyCy7EDwXFRA4iM1skzKKs/gRd+M+SJAuwTgKTXSrWI4v/MrQBTzDkCvzAgJkxqJawOILHsQOIDyQ5wnRt5rAWiOeCPEZu+I+8RIaWQ0QGtP4DreocBuCvtSeQDvna4VgGjEaxCDsnLTeOUpO3azJAM4sWzvf3vd8bwcRowYZgBRTFfjuzXuDBNTiSxbELgut/vjIrCpy9VNk4/y0ABZYmnGc2gA966q/lAHwDQx4p3QwQG0a1owADeaAYw/gcFf5cBkQVxpjGetOGQZklDvB6EB1BtSaAD1PyEIAIk3AeLEyFjbQYMAAKiUgHkSBhlG2vpfWUojywkEF9rwrcgTqg5YBGgReBXBUWUIYpgYcduU6ixXsmwXRLaEuk/Ima+WbRLQ2fgC+RzXgT1bPk8AAAAASUVORK5CYII=",hidden:!0,defaultAdd:!0},{name:"request",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACbUlEQVRYR+2XTXLTQBCFX5sF7DALsHaYE+AbxD4ByQlITmDrBCQnGHMClBMkOUHMCRAnIOwU2JhdssCPamnkkmRJM5KTKqpgqryxpqe/7unpH0HHFRhOIXhPYCLARMUJxALEIM6TUFZdjhTfzS8NJ08EBsDUIbP6TYQ/Q4l9zvYCUKspuBBg6HMogbUQRz7ecAKo5QPBta/yHFAhNsTM5QknQLDkNwBjH8tr9twkC3nTJtsKEBgeQ/Cpp/JMjDhJQomazmgFGBleiuDdPgAkrm5DOewFECzJfZTnsslCGg1NPwSGYwqMCOJkLme54GMAvDI8HAjmG+Ljj1AuUwD754VVHCULORkaDp/ZRLOvF+6AeB3KuhRTWdI63rqmct8RBmgMnD5AJCZCLNO4JL7eA1OF2gKoxU+BlQje9lHgK1NUrjKl4OgMQcxsLVj6gFeV7wDYgDyF4IOPRXl0B4YrCA6cMsRZEsppcd/O8wgM/wP8Yx4YGWqiLOZ7rXxe1a9zEAI3yH5ZnSKuZJ902wNg56FImobLKVd7PveTAtAZgPgMYNszbrJesrz+hmeoHrh2JpUeHtgQR1oBXYno0QBAzKqNam2jMDJci+C5ywtdY+COeKEVsNUD+nFkqMVl/pAATa1ZrQfsEPLlIQHq7r+2GqYlOZsD0rGrbXW5Ah3f7olZ6xVUlWv9bqvzXgDEdwhe275hB6LcERUtt/18YBjpMFrnCSeA7fuKvWDVE1uAkqLKMJEeAGiVTC3JVxMAiV8CLIoDSV1DWooBLUqqpCpYVGjTtg4ZY03XJYBsTF8TiKrJJj8jhyAR3oaSNqh/AKendd/nwfiIAAAAAElFTkSuQmCC",title:"开始抓取",desc:"抓取静态HTML页面或者API接口，抓取结果存为resp变量中。<br/>支持方法参考命令提示。"},{name:"variable",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAgCAYAAACYTcH3AAACe0lEQVRYR+2WMW5TQRCGv0mEoMMUKK80J0joKJBITgCUVAkniLehjQ+A9GwugLlBboA5QZITYLpnaEwXkZhBs+xu1s8vkhMDMpItudh9szP//PPP7Aor9JMVwsLqgmmV2roD7W9OTpsYe1jqzgWMJk4m9e/FO30W986nnDXZ1P2bPzsT480ws9XTE4EdlNeVk0EesCj1AOE9MKw6smffzPk9oQQOGsAPz5WXOajcP4KB9+cUTrng6SyYUici3M8DxiDRkSpnYyc+o+TcHCpnAhOFlgjb4VwCbuuipxr2R0A7T0DhSR1MT4RDb6Q8qpzYIYpS2wif/bbixk56Ram7CB+D7QyTRanDkDlVR1KMDIz5/wAMfhp4aJvPGTBNQT0DpSaQ58oDo95KdBeslKOxk06eZW6Pslc5GdaYIfrJz811U8zK6jjuyOPgxFhpWzaVkxl9eN1sso2ya3+FHYFWCtIERvlUOdmt66wJTBSqL5UHcVWOlKUH2dcjVToxuCrfTW9+/Vug5mOemUXBhLJ4IavSD473Ub5UTpLosu7y9Z9CL7ZoUWoX4ehPgYkaGfnugFYUbuquUo9FeG7rXKQhmfRtaWZyIadBFoQb10WpA4T9vJu8fjY4ROlmmkmdlrrpJmUK7Zzas0m4Nj03hZO6CEP797MRkUSfgZlrBDt37d1kwTZgYIPMJmWcOXnwYNP1UxtsJtm/a7amKYWOQverk+OQoDF2MIUXTVfO6l6UTZT/y701M9exvWZmzcxNO3F1NbPV18OZt8hNU1vCXn/w9upJmD0tl/B566MqvKo/O+3umHuB3TrC4gdHesmb1dXM4on8Hcs1M//FBP4FX81QGwO29kEAAAAASUVORK5CYII=",title:"定义变量",desc:"定义流程变量。<br/>定义变量有先后顺序，先定义变量后续可以使用，拖动可以交换变量顺序。"},{name:"loop",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADO0lEQVRYR9WWS2hTURCGvwnVlVjpzgdWxQeo0IWP7rQuRBQVFayLSlUQH5V2UWhzo4takOTGCF1UlOJCKyJiFxUFSwWxioguRBEV31qhVXeKSI3ajJybGxPTJDdpCtUDIeFmZv7vzpmZc4RxXjLO+vzHAH4tZZhySihzsih8JCTPCs1o/hlo0UlE2QlsA2YD0zOI3QV68dFBUD7kA+MN0KIT+U4zwg5gbkrQn8ArYELac2MyCJzClsNeELkB/DoT4SJQ6QZ6AZzFRw8TeEyr/HCeH9YyhqhEWAzUAbNc+26GaSIir7OBZAcIaCXKbaAEGAIaidJJm5jf2ZelRrwFnO0y6wlCNSF5mskpM0CdTmIyX12HAWLs4Khc90rnX/9bagBO/4FQ1hGW9+kxMgNYesEpNuUtw2zimDwqSDxhbOlupxbMUjoIyz5vAEuN0UnXqYawnB+VeBKiCTjqxjNZ6EmNNzIDlt4AqhDaCUlDUeJJiHNATaaYIwECuhClOp8WyhsuoOtRrjhta8u83BnIO2qBhpaq67EUW+4nvP/OgKWm55cBzdjSVaBEZnOzpcoUBDMlTX3tdVs0ii2rkgBx8a0pUcw2FA9h6QAwzZkHsCjlexBbpscBRoonOIqHCOhGlLNAacrLfUGoJSSXBUurAFP55kTrRylH+YwwBegzaSp6K/y6AnGG0hzgDcouwnIrLmmWXyP4uIk6J912FNP7gwjfxqwbDupiYrTjo56gPM5WhHuADicDMZYTkZdFv71HgPQuMMdtXFRpICztYwJgqSnuOpRDhOWO1yS8CqwFerBlXdEAAZ2PYg6yGUBr+paOnIR+rUXodIXbsKWxKIhkhw3gYwlB+eQ9Cf16HOGAa1iPLcdHBWHpEeCQ67sGW66lx8l+IUmdDUITITlWEERAT6Dsd326sWVLJv/cV7Lk/Da+ffiwCUpvTpD4wWO6aYNr14Ut1dl8vC+lliaKMh5DuYQP08cP8HEP5RcxKlAWIKxOETbWFraEcwF7Azhh1LyR+Szx3AYzQ+AMMTqJyEMv+/wAElEs3QxUACvdA2YqEAWeu/Oj3xG35Z2XcOZJmK/XGNoVloExFP5nMvAbItf8IXnK1DcAAAAASUVORK5CYII=",title:"循环",desc:""},{name:"forkJoin",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADWElEQVRYR8WX34sVZRjHP9+tqJtA+uHMuY2gOwkSgugfCLopSLMNE6tNVDwzq6hYrLvBlhvovCNsucUWhiYaeBV40z8Q1E13UXQVnjlh3XQZ7TdGz7F1d+bMnEPie3ne93m+n3eeX+8R93jpHuszMcDjmZ++Tzwn85f+4dr1I7oxyWUmAoiCdwLnBGvAA8B11pgrZnVlXIixATqZpy0uYBaKVPNbMm95SJwDdlpM97v6ahyIsQDi4N3A+aH4eqEo9wWZaeCNItGXbSFaA0RnvVdrrFaJD8Xi4PPAbps3+6k+bwPRCqCTe8ZmZZT4bYjMq4i9Eu/0uvq0CaIRIA7eDyy3ER+KRZlXJGaAA0Wij0dBjASIgg8J8nHE14VjGdhv6PYTna2DqAXoZJ61OD2J+FCsE5wbDkkc7nV1pgqiEiDOfRSzVCceZU40xS7Mkzedil+8xqV+qrBRJM5dXmIWcazo6qON+5sAOsEnDIt14nHmecTJcl/wY+nQsG34W9kbNkFkXkIcFbzbS/TB+v07AOLgOWChVjz4FeBKkaj6ywUb2FEk+nojRBS8KDgBnCwSvT/cv+2ok/sZm+8b6rzc/6bqlqXDwdd5sUi0vSrecfACMCexvdfVD7eiN1hR5rJ2TxWJttZlbBz8p82BfqpLVWeizLsklotEj1TtP7bkh+9/kN+Bw8PyHBfgD5m3e6muVgl0Mr9s8VmR6NHaS2T+GZFtAmgVgtzfsca1kSGY4oWiq2crQ3DGO5jicmUIbsawKQkHFTAqCW3SynL8b5DNF6nKXBhU8AbUpjKMgq8KXiqT1fDTIJGeGlWGw1ki814v1WJtGd5uow2NKM68B3EQeGJg8yuwVFl+ubsyZYM6XiRaamxEwwP/RyuOg48Bp4AjRaLTVXlx94bRIF8skn5XeV1V3JVx3An+0HAcc7BIVU7F2tUIUFp2Ms9Y7R4kUXAmSAT7eolWRonf0QmbDg46ZdOT7BNgn+GtfqLVJp9jAQz6RO2jNA7+AiirY0/RVfk2bLVahWC9pyj3azIX1w+tOLicDa/KvN5LdbGVcl0jamMc32qp5TPrt0E769jM9hNdbmPf2IjaONkavG0Kni//mv0N395I1Wtj17oRTeJsEpuxc2ASkVE2/wK1YaYwksZPTgAAAABJRU5ErkJggg==",title:"执行结束",desc:""},{name:"output",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAByUlEQVRYR+WXwVHDMBBF/4YD3AgHwEd3QKiA0IE7IOnAqoCkAqWDmAqACggVJJTAzRku4UYOmWVWloMZgi17bGcGdNGMrZWeVtrdL4JtXc3dI8I9gH76rWIfxSENXW0pHehpHoAwdTXMHccYx4pGLnNlAUYg3BojxtjFODPGB+Hmmw1jGCuKiubZCRCHtP1eNIH89zT3QXgy7IwXIlzYjRRC1A7wwTg5BGauELUDiPfkQrtCNAIg7neFaAzAFaJRAIE41dzrJHfieNfFrB2gMGoYz7GibbL7GwAmjQO9vN0zMDGh2YQHCt2eJKsZCFf/F+A3L9VyCV2OQMLxgKA3DPWmaJHatAbgaTbVloHFmnG9UrQSiDYBfFlcEpL0y5AuWwWQxc40B51EdUkzyqmUB6xs0wB8l3PfNYaBHgFdqx1UKYCs8KgKkLVjYFUKwJbYKN1BFQjjga/CNC4FUGXBrI0NxbmtinexokFrAJ5mnwlz8Z7oxjXQl1BsEyDJA4z3NeC3ngeM+4HJBgj3kgn3XgvONRs9IOe/VBTuoxa46wEQnN51pcKSMTAZNEcR1fc4zSFjxuNSUfDjCKyuezCyqanGeN0AQTYKPgFOSUMAph/CYQAAAABJRU5ErkJggg==",title:"输出",desc:"输出流程中的变量结果（仅测试下有用）"}],o=function(n){var o=new Image;o.src=n.image,o.title=n.title,o.id=n.name,o.onclick=function(e){n.desc},n.hidden||t.appendChild(o),n.disabled||e.addShape(n.name,n.title||"Label",o,n.defaultAdd)},i=0,a=n.length;i<a;i++)o(n[i])}},"8ea8":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"测试窗口",mask:!1,maskClosable:!1},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("template",{slot:"footer"},[n("a-button",[e._v("\n      Return\n    ")])],1),n("p",[e._v("Some contents...")]),n("p",[e._v("Some contents...")]),n("p",[e._v("Some contents...")]),n("p",[e._v("Some contents...")]),n("p",[e._v("Some contents...")])],2)},i=[],a=n("e100"),r={name:"TestModal",mixins:[a["default"]],props:{editor:Object,cell:Object},data:function(){return{visible:!0}}},s=r,l=n("2877"),c=Object(l["a"])(s,o,i,!1,null,null,null);t["default"]=c.exports},"93ad":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-layout",{ref:"spiderDetail",staticClass:"spider-detail-container"},[n("a-layout-header",[e._l(e.headerBtns,(function(t,o){return["ant"===t.type?n("a-tooltip",{key:"header-icon-"+o,attrs:{title:t.title,placement:"bottom"}},[n("a-icon",{attrs:{type:t.icon},on:{click:function(n){return e.headerBtnItemHandle(t.click)}}})],1):"divider"===t.type?n("a-divider",{attrs:{type:"vertical"}}):e._e()]})),n("test-modal",{attrs:{editor:e.editor,cell:e.selectCell}}),n("history-version-modal",{ref:"historyVersionModal",attrs:{id:e.queryParam.id,editor:e.editor}})],2),n("a-layout",[n("a-layout-sider",{attrs:{width:"100px"}},[n("div",{ref:"spiderToolbarContainer",staticClass:"spider-toolbar-container"})]),n("a-layout-content",{staticClass:"spider-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!0!==e.showXMLPage,expression:"showXMLPage !== true"}],ref:"spiderEditorContainer",staticClass:"spider-editor-container"}),n("code-editor",{directives:[{name:"show",rawName:"v-show",value:!0===e.showXMLPage,expression:"showXMLPage === true"}],ref:"xmlEditor",attrs:{height:"100%",option:{language:"xml"}},on:{change:function(t){return e.editor.setXML(t)}}})],1)],1),n("a-layout-footer",{staticClass:"spider-properties-container"},[n(e.currentTemplate,{tag:"component",attrs:{editor:e.editor,cell:e.selectCell}})],1)],1)},i=[],a=(n("7f7f"),n("57e7"),n("ac6a"),n("f3e2"),n("7b21")),r=n("05b6"),s=n("8e2f"),l=n("14c9"),c=n("2260"),d=n("7485"),u=n("8ea8"),h={components:{HistoryVersionModal:c["default"],CodeEditor:d["default"],TestModal:u["default"]},data:function(){return{queryParam:{id:""},headerBtns:a,editor:null,selectCell:{id:"",data:new r["JsonProperty"]},showXMLPage:!1}},computed:{currentTemplate:function(){var e="";return e=!0===this.selectCell.edge||1===this.selectCell.edge?"edge":(!this.selectCell.data||void 0!==this.selectCell.data.get&&void 0!==this.selectCell.data.get("shape"))&&this.selectCell.data.get("shape")||"root",function(){return n("4743")("./".concat(e))}}},watch:{"selectCell.value":{handler:function(e){this.selectCell.valueChanged&&this.editor.graph.model.setValue(this.selectCell,e)}}},methods:{bindKeyEvent:function(){var e=this;window.onkeydown=function(t){var n=t.key;e.headerBtns.forEach((function(o){o.exeFunKey&&o.exeFunKey.length>0&&(-1!==o.exeFunKey.indexOf("ctrl")&&!0===t.ctrlKey&&-1!==o.exeFunKey.indexOf(n.toLowerCase())||-1!==o.exeFunKey.indexOf("alt")&&!0===t.altKey&&-1!==o.exeFunKey.indexOf(n.toLowerCase())||1===o.exeFunKey.length&&-1!==o.exeFunKey.indexOf(n.toLowerCase()))&&(e.headerBtnItemHandle(o.click),t.preventDefault())}))}},onSelectedCell:function(e){this.selectCell=e},renderSpiderEditor:function(){var e=this,t=new r["SpiderEditor"]({element:this.$refs.spiderEditorContainer,selectedCellListener:function(t,n){e.onSelectedCell(t,n)}});Object(s["loadShapes"])(t,this.$refs.spiderToolbarContainer),this.editor=t},headerBtnItemHandle:function(e){this.headerBtnHandle(e.name,e.params)},headerBtnHandle:function(e,t){e&&this[e]&&"function"===typeof this[e]&&this[e](t)},goPage:function(e){this.$router.push(e)},xmlAction:function(){var e=this;this.queryParam.id?Object(l["xmlRequest"])(this.queryParam.id,(function(t){e.editor.setXML(t)})):this.editor.onSelectedCell()},saveAction:function(){var e=this;this.validXML((function(){var t=e.queryParam;t.xml=e.editor.getXML(),t.name=e.editor.graph.getModel().getRoot().data.get("spiderName"),Object(l["saveRequest"])(t,(function(t){e.queryParam.id!==t&&(e.queryParam.id=t,e.$router.push("/spider_detail/"+t)),e.$message.success("保存成功")}))}))},validXML:function(e){var t=this,n=(this.$createElement,this.editor.valid());n?this.$confirm({title:"异常处理",content:function(e){return e("div",{style:"color:red;"},["检测到有箭头未连接到节点上，是否处理？"])},okText:"处理",cancelText:"忽略",onOk:function(){t.editor.selectCell(n)},onCancel:function(){e&&e()}}):e&&e()},spiderFlowExecute:function(e){this.editor.execute(e)},deleteSelectCells:function(){this.editor.deleteSelectCells()},printXmlToConsole:function(){console.log(this.editor.getXML())},getHistoryVersion:function(){this.$refs.historyVersionModal.historyAction()},showXMLPageHandle:function(){this.$refs.xmlEditor.setValue(this.editor.getXML()),this.showXMLPage=!this.showXMLPage}},mounted:function(){this.queryParam.id=this.$route.params.flowId,this.renderSpiderEditor(),this.bindKeyEvent(),this.xmlAction()},destroyed:function(){window.onkeydown=null}},p=h,A=(n("df79"),n("2877")),m=Object(A["a"])(p,o,i,!1,null,null,null);t["default"]=m.exports},df79:function(e,t,n){"use strict";n("3ff2")},e100:function(e,t,n){"use strict";n.r(t);var o={data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:16},colSpan:8},size:"small"}},methods:{getCellValue:function(e,t){var n=this.cell.data.get(e);return n||!t?n:(this.cell.data.set(e,t),t)},setCellValue:function(e,t){return t&&(t=t.target?t.target.value:t,this.cell.data.set(e,t)),this.cell.data.get(e)}}};t["default"]=o}}]);