(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17c04ec3","chunk-2d0ab68f","chunk-2d224862"],{"14c9":function(t,e,n){"use strict";n.r(e),n.d(e,"listRequest",(function(){return a})),n.d(e,"startStopRequest",(function(){return u})),n.d(e,"cronRequest",(function(){return i})),n.d(e,"removeRequest",(function(){return r})),n.d(e,"runRequest",(function(){return c})),n.d(e,"logDownloadRequest",(function(){return d})),n.d(e,"otherRequest",(function(){return l})),n.d(e,"xmlRequest",(function(){return f})),n.d(e,"saveRequest",(function(){return m})),n.d(e,"historyRequest",(function(){return p})),n.d(e,"recoverHistoryRequest",(function(){return h}));n("7f7f");var o=n("4020"),s="spider/",a=function(t,e,n){o["default"].send(s+"list",t,e,n)},u=function(t,e,n,a){o["default"].send(s+(t?"start":"stop"),{id:e},n,a)},i=function(t,e,n){o["default"].send(s+"cron",t,e,n)},r=function(t,e,n){o["default"].send(s+"remove",{id:t},e,n)},c=function(t,e,n){o["default"].send(s+"run",{id:t},e,n)},d=function(t,e){window.open(s+"log/download?id="+t+"&taskId="+(e||""))},l=function(t,e,n){o["default"].send(s+"other",{id:t},e,n)},f=function(t,e,n){o["default"].send(s+"xml",{id:t},e,n,{responseType:"text"})},m=function(t,e,n){t.name=t.name||"未定义名称",o["default"].send(s+"save",t,e,n,{responseType:"text"})},p=function(t,e,n){o["default"].send(s+"history",{id:t},e,n)},h=function(t,e,n,a){o["default"].send(s+"history",{id:t,timestamp:e},n,a)}},2260:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:"历史版本",footer:null},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("a-table",{attrs:{columns:t.columns,"data-source":t.tableDataTime,bordered:"",size:t.size,pagination:!1},scopedSlots:t._u([{key:"operation",fn:function(e,o){return[n("a-button",{attrs:{type:"link",size:t.size},on:{click:function(e){return t.recoverHistory(o.timestamp)}}},[t._v("\n        恢复到此版本\n      ")])]}}])})],1)},s=[],a=(n("6d67"),n("14c9")),u=n("e100"),i=n("c1df"),r=n.n(i),c={name:"HistoryVersionModal",props:{id:{type:String},editor:{type:Object}},mixins:[u["default"]],data:function(){return{show:!1,tableData:[],columns:[{title:"修改时间",dataIndex:"date"},{title:"操作",dataIndex:"timestamp",width:120,scopedSlots:{customRender:"operation"}}]}},computed:{tableDataTime:function(){return this.tableData.map((function(t,e){return{key:e,timestamp:t,date:r()(t).format("YYYY-MM-DD HH:mm:ss")}}))}},methods:{historyAction:function(){var t=this;Object(a["historyRequest"])(this.id,(function(e){t.tableData=e.data,t.tableData.length>0?t.show=!0:t.$message.success("暂无历史版本！")}))},recoverHistory:function(t){var e=this;this.$confirm({title:"信息",content:"你确定要恢复到该版本吗？",okText:"确定",cancelText:"取消",onOk:function(){Object(a["recoverHistoryRequest"])(e.id,t,(function(t){e.editor.setXML(t.data),e.show=!1}))},onCancel:function(){}})}}},d=c,l=n("2877"),f=Object(l["a"])(d,o,s,!1,null,null,null);e["default"]=f.exports},e100:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:16},colSpan:8},size:"small"}},methods:{getCellValue:function(t,e){var n=this.cell.data.get(t);return n||!e?n:(this.cell.data.set(t,e),e)},setCellValue:function(t,e){return e&&(e=e.target?e.target.value:e,this.cell.data.set(t,e)),this.cell.data.get(t)}}};e["default"]=o}}]);